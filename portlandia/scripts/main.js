!function(e,a,n,t){"use strict";function r(e){for(var a=l.getElementsByTagName("div"),n=0;n<a.length;n++)a[n].className=a[n].className.replace(/active/,"").replace(/\s\s*$/,"");e.className+=" active"}n.mapbox.accessToken="pk.eyJ1IjoibWFja2RveWxlIiwiYSI6ImhqUGZNVmMifQ.lRcp3o-ilj3gNZEQ7HzRWg";var i=n.mapbox.map("map","examples.map-i80bb8p3").setView([45.523999,-122.665],14),s=function(){var e=null;return $.ajax({async:!1,global:!1,url:"../data/listings.json",dataType:"json",success:function(a){e=a}}),e}(),l=a.getElementById("listings"),o=n.mapbox.featureLayer().addTo(i),c="";o.setGeoJSON(s),o.eachLayer(function(e){var t=e.feature.properties;c+=e.feature.geometry.coordinates+";",console.log(c);var s="<h3>"+t.name+"</h3><div>";t.address&&(s+="<small>"+t.address+"</small>"),t.district&&(s+="<br /><small>"+t.district+"</small>"),s+="</div>",e.bindPopup(s);var o=l.appendChild(a.createElement("div"));o.className="item";var m,d=o.appendChild(a.createElement("a"));d.href="#",d.className="title";var p=o.appendChild(a.createElement("a"));p.className="url",p.target="_blank",d.innerHTML=t.name,t.address&&(d.innerHTML+='<br /><small class="quiet">'+t.address+"</small>"),t.district&&(m=o.appendChild(a.createElement("div")),m.innerHTML=t.district),t.phone&&(m.innerHTML+=" &middot; "+t.phoneFormatted),t.url&&(p.href=t.url,p.innerHTML+="<small>"+t.url+"</small>"),d.onclick=function(){return r(o),i.setView(e.getLatLng(),16),e.openPopup(),!1},e.on("click",function(){i.panTo(e.getLatLng()),r(o)}),e.setIcon(n.icon({iconUrl:"../images/marker-condo-alt@2x.png",iconSize:[56,56],iconAnchor:[28,28],popupAnchor:[0,-34]}))});var m=function(e){for(var a in e)if(e.hasOwnProperty(a)){var n=e[a];console.log(n)}};m()}(window,document,L);